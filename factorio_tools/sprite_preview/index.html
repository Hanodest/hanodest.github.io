<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>
      Factorio sprite preview
    </title>
    <link rel="stylesheet" href="style.css">
    <script type="module">
      import {Gui} from './gui.js';
      let gui = undefined;
      window.addEventListener('load', async () => {
        gui = await Gui.create();
      });
    </script>
  </head>
  <body>
    <div>
      <div class="outer-frame main-window">
        <div class="inner-frame">
          <canvas id="image" class="main-image"></canvas>
        </div>
        <div class="inner-frame" id="controls">
          <div id="global_controls" class="box-dark-inset hidden">
            <div class="range-line">
              <div>
                <label for="animation_speed">Animation
                speed:</label>
              </div>
              <div class="range-container">
                <input id="animation_speed" type="range" min="1"
                max="120" value="60">
              </div>
              <div id="previous_button" class="previous-button">
              </div>
              <div id="pause_button" class="pause-button"></div>
              <div id="next_button" class="next-button"></div>
            </div>
            <div class="range-line">
              <div>
                <label for="day_night">Daytime</label>
              </div>
              <div class="range-container">
                <input id="day_night" type="range" min="0" max=
                "255" value="0">
              </div>
            </div>
            <div class="range-line">
              <div>
                <label for="background">Background</label>
              </div>
              <div>
                <select id="background">
                  <option label="Lab tiles" value="lab">
                  </option>
                  <option label="Nauvis" value="nauvis">
                  </option>
                  <option label="Vulcanus" value="vulcanus">
                  </option>
                  <option label="Fulgora" value="fulgora">
                  </option>
                  <option label="Gleba" value="gleba">
                  </option>
                  <option label="Aquilo" value="aquilo">
                  </option>
                </select>
              </div>
            </div>
          </div>
          <div id="layers_settings"></div>
          <div class="right-aligned">
            <input type="file" id="file" accept=
            "image/png, application/json" class="hidden" multiple>
            <div id="download_button" class="download-icon hidden">
            </div>
            <div id="download_progress" class=
            "download-progress hidden"></div>
            <div id="import_settings" class="import-icon"></div>
            <div id="export_settings" class="export-icon"></div>
            <div id="add_layer" class="box-light text-button">
              + Add spritesheets
            </div>
          </div>
        </div>
      </div>
    </div>
    <div style="display:none">
      <div id="import_header" class="import-header">
        Accepted input: well-formed JSON of <a href=
        "https://lua-api.factorio.com/latest/prototypes/AnimationPrototype.html">
        AnimationPrototype</a> . It can be obtained from the export
        function of this tool, from a dump produced by running
        <a href=
        "https://wiki.factorio.com/Command_line_parameters">factorio
        --dump-data</a>, from <a href=
        "https://raw.tools.bpbin.com/">data.raw explorer</a>, or
        any other methods.
      </div>
      <table>
        <tr class="image-rule-header" id="image_rule_header">
          <td class="image-rule-header-cell"></td>
          <td class="image-rule-header-cell"></td>
          <td class="image-rule-header-cell">
            Filename
            <div class="tooltip">
              <div class="tooltip-icon"></div>
              <div class="tooltip-text">
                RegExp that will be matched against the names of
                all added spritesheets. If empty, will match
                <b>all</b> uploaded files.
              </div>
            </div>
          </td>
          <td class="image-rule-header-cell">
            Sheet number
            <div class="tooltip">
              <div class="tooltip-icon"></div>
              <div class="tooltip-text">
                RegExp matching a part of the file name.
                Spritesheets that have the same name if the matched
                part is ignored will be grouped into the same
                layer.
              </div>
            </div>
          </td>
          <td class="image-rule-header-cell">
            Columns
          </td>
          <td class="image-rule-header-cell">
            Rows
          </td>
          <td class="image-rule-header-cell">
            Scale
          </td>
          <td class="image-rule-header-cell">
            Blend mode
          </td>
          <td class="image-rule-header-cell">
            Draw mode
          </td>
          <td class="image-rule-header-cell">
            Color
          </td>
          <td class="image-rule-header-cell">
            Ignore
          </td>
          <td class="image-rule-header-cell">
            Priority
            <div class="tooltip">
              <div class="tooltip-icon"></div>
              <div class="tooltip-text">
                When multiple spritesheet are selected at once,
                this priority determines the order of layers they
                will be put in.
              </div>
            </div>
          </td>
        </tr>
      </table>
    </div>
    <div id="user_settings" class="user-settings-icon"></div>
  </body>
</html>
